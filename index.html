<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unique Somobai Somiti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      html {
        scroll-behavior: smooth;
      }

      body {
        scroll-margin: 30px;
      }

      section {
        scroll-margin-top: 100px; /* Ensures sections don't get hidden behind the navbar */
      }

      #nbar {
        position: sticky;
        top: 0;
        z-index: 10;
      }

      #qr-code img {
        transition: transform 0.3s ease-in-out;
      }

      #qr-code img:hover {
        transform: scale(1.05);
      }

      #hero {
        width: 100%;
        height: 60vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #hero img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* Login Section Styles */
      #login-section {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.8);
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
      }

      #login-box {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      #login-box h2 {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
      }

      #login-box input {
        width: 100%;
        padding: 0.5rem;
        margin-bottom: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      #login-box button {
        background: #3b82f6;
        color: white;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      #login-box button:hover {
        background: #2563eb;
      }

      #login-error {
        color: red;
        margin-top: 1rem;
        display: none;
      }

      /* Hide main content initially */
      #main-content {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- Login Section -->
    <section id="login-section">
      <div id="login-box">
        <h2>Login to Access the Website</h2>
        <input
          type="password"
          id="password"
          placeholder="Enter Password"
          class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
        />
        <button
          id="login-button"
          class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700"
        >
          Login
        </button>
        <p id="login-error">Incorrect Password. Please try again.</p>
      </div>
    </section>

    <!-- Main Content (Hidden Initially) -->
    <div id="main-content">
      <!-- Navbar -->
      <header id="nbar" class="bg-blue-700 text-white p-4">
        <div class="container mx-auto">
          <div class="flex justify-between items-center">
            <h1 class="text-xl font-bold">Unique Somobai Somiti</h1>
            <button
              class="lg:hidden text-white focus:outline-none"
              id="menuToggle"
            >
              <svg
                class="w-6 h-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16m-7 6h7"
                />
              </svg>
            </button>
          </div>
          <nav
            id="navbarMenu"
            class="hidden flex flex-col space-y-2 mt-2 lg:flex lg:flex-row lg:items-center lg:space-x-4 lg:space-y-0"
          >
            <a href="#" class="menu-item block hover:underline">Home</a>
            <a href="#qr-code" class="menu-item block hover:underline">QR</a>
            <a href="#submit-payment" class="menu-item block hover:underline"
              >Submit Payment</a
            >
            <a href="#view-transactions" class="menu-item block hover:underline"
              >View Transactions</a
            >
            <a href="#contact" class="menu-item block hover:underline"
              >Contact</a
            >
            <button id="logout-button">Logout</button>
            <!-- New Logout Button -->
          </nav>
        </div>
      </header>

      <section id="hero">
        <img src="hero.jpg" alt="Unique Somobai Somiti" />
      </section>

      <!-- QR Code for Send Money -->
      <section
        id="qr-code"
        class="container mx-auto mt-8 p-6 bg-white shadow rounded text-center"
      >
        <h2 class="text-2xl font-semibold mb-4">Send Money</h2>
        <div class="flex justify-center items-center">
          <img
            src="qr.jpg"
            alt="QR Code"
            class="w-48 h-48 object-contain border rounded-lg shadow-lg"
          />
        </div>
        <p class="mt-4 text-gray-600">Scan the QR code to send your payment.</p>
      </section>

      <!-- Submit Payment Form -->
      <section
        id="submit-payment"
        class="container-fluid mx-auto mt-8 p-6 bg-white shadow rounded"
      >
        <h2 class="text-2xl font-semibold mb-4">Submit Payment Info</h2>
        <form
          id="paymentForm"
          name="submit-to-google-sheet"
          class="grid grid-cols-2 gap-4"
        >
          <div>
            <label for="shareholderName" class="block text-gray-700"
              >Shareholder Name</label
            >
            <input
              type="text"
              id="shareholderName"
              name="shareholderName"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              required
            />
          </div>
          <div>
            <label for="shareNumber" class="block text-gray-700"
              >Share Number</label
            >
            <input
              type="string"
              id="shareNumber"
              name="shareNumber"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              required
            />
          </div>
          <div>
            <label for="monthSelection" class="block text-gray-700"
              >Select Month</label
            >
            <select
              id="monthSelection"
              name="Month"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              required
            >
              <option value="" disabled selected>Select a month</option>
              <option value="January">January</option>
              <option value="February">February</option>
              <option value="March">March</option>
              <option value="April">April</option>
              <option value="May">May</option>
              <option value="June">June</option>
              <option value="July">July</option>
              <option value="August">August</option>
              <option value="September">September</option>
              <option value="October">October</option>
              <option value="November">November</option>
              <option value="December">December</option>
            </select>
          </div>

          <div>
            <label for="numberOfShares" class="block text-gray-700"
              >Number of Shares</label
            >
            <input
              type="number"
              id="numberOfShares"
              name="numberOfShares"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              required
            />
          </div>
          <div>
            <label for="transactionId" class="block text-gray-700"
              >Transaction ID</label
            >
            <input
              type="text"
              id="transactionId"
              name="transactionId"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              required
            />
          </div>
          <div>
            <label for="paymentAmount" class="block text-gray-700"
              >Payment Amount</label
            >
            <input
              type="number"
              id="paymentAmount"
              name="paymentAmount"
              class="w-full p-2 border rounded focus:outline-none focus:ring focus:ring-blue-300"
              readonly
            />
          </div>

          <!-- This div will conditionally create a full-width row only for the submit button -->
          <div class="col-span-2">
            <button
              type="submit"
              class="w-full mt-5 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700"
            >
              Submit
            </button>
          </div>
        </form>

        <p id="statusMessage" class="mt-4"></p>
      </section>

      <!-- View Transactions Section -->
      <section
        id="view-transactions"
        class="container mx-auto mt-8 p-6 bg-white shadow rounded"
      >
        <h2 class="text-2xl font-semibold mb-4">View Transactions</h2>
        <iframe
          src=""
          id="googleSheet"
          class="w-full h-96 border rounded"
          title="Google Sheet"
        ></iframe>
      </section>

      <section id="contact" class="bg-gray-100 py-8 px-6">
        <div class="max-w-4xl mx-auto text-center">
          <!-- Section Title -->
          <h2 class="text-3xl font-bold text-gray-800 mb-6">Get in Touch</h2>
          <p class="text-gray-600 mb-8">
            Have questions or want to work together? Reach out to me via email
            or phone!
          </p>

          <!-- Contact Information -->
          <div class="bg-white shadow-lg rounded-lg p-8 space-y-6">
            <!-- Email Section -->
            <div class="flex items-center">
              <span class="text-gray-700 text-sm font-medium mr-4">Email:</span>
              <a
                href="mailto:debashisdhali104035@gmail.com"
                class="text-blue-600 hover:underline"
                >debashisdhali104035@gmail.com</a
              >
            </div>

            <!-- Mobile Number Section -->
            <div class="flex items-center">
              <span class="text-gray-700 text-sm font-medium mr-4">Phone:</span>
              <a href="01581019894" class="text-blue-600 hover:underline"
                >01581019894</a
              >
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="bg-gray-800 text-white text-center py-4 mt-8">
        <p>© 2025 Unique Somobai Somiti. All Rights Reserved.</p>
      </footer>
    </div>

    <script>
      // Login Logic
      const loginSection = document.getElementById("login-section");
      const mainContent = document.getElementById("main-content");
      const loginButton = document.getElementById("login-button");
      const passwordInput = document.getElementById("password");
      const loginError = document.getElementById("login-error");
      const logoutButton = document.getElementById("logout-button");

      // Hardcoded password (replace with a secure method in production)
      const correctPassword = "2021";

      // Check if the user is already logged in
      function checkLoginState() {
        const isLoggedIn = localStorage.getItem("isLoggedIn");
        if (isLoggedIn === "true") {
          loginSection.style.display = "none"; // Hide login section
          mainContent.style.display = "block"; // Show main content
        } else {
          loginSection.style.display = "block"; // Show login section
          mainContent.style.display = "none"; // Hide main content
        }
      }

      // Run the check on page load
      checkLoginState();

      loginButton.addEventListener("click", () => {
        const enteredPassword = passwordInput.value.trim();

        if (enteredPassword === correctPassword) {
          localStorage.setItem("isLoggedIn", "true"); // Store login state
          loginSection.style.display = "none"; // Hide login section
          mainContent.style.display = "block"; // Show main content
        } else {
          loginError.style.display = "block"; // Show error message
        }
      });

      // Logout Logic
      logoutButton.addEventListener("click", () => {
        localStorage.removeItem("isLoggedIn"); // Clear login state
        mainContent.style.display = "none"; // Hide main content
        loginSection.style.display = "block"; // Show login section
        passwordInput.value = ""; // Clear password field
        loginError.style.display = "none"; // Hide error message
      });

      // Toggle Navbar
      const menuToggle = document.getElementById("menuToggle");
      const navbarMenu = document.getElementById("navbarMenu");
      const icon = menuToggle.querySelector("svg");
      const menuItems = document.querySelectorAll(".menu-item");

      function toggleMenu() {
        navbarMenu.classList.toggle("hidden");
        navbarMenu.classList.toggle("flex");

        if (navbarMenu.classList.contains("hidden")) {
          icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />`;
        } else {
          icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />`;
        }
      }

      menuToggle.addEventListener("click", toggleMenu);

      // Close menu when a menu item is clicked
      menuItems.forEach((item) => {
        item.addEventListener("click", toggleMenu);
      });

      // Handle screen resize
      window.addEventListener("resize", () => {
        if (window.innerWidth >= 1024) {
          navbarMenu.classList.remove("hidden");
          icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />`;
        } else {
          navbarMenu.classList.add("hidden");
        }
      });

      // Initial navbar visibility setup
      if (window.innerWidth >= 1024) {
        navbarMenu.classList.remove("hidden");
      } else {
        navbarMenu.classList.add("hidden");
      }

      // Payment amount calculation
      function calculatePaymentAmount() {
        const today = new Date();
        const currentDay = today.getDate();

        const numberOfSharesField = document.getElementById("numberOfShares");
        const paymentAmountField = document.getElementById("paymentAmount");

        let numberOfShares = parseInt(numberOfSharesField.value, 10);

        if (isNaN(numberOfShares) || numberOfShares < 1) {
          paymentAmountField.value = 0;
          return;
        }

        if (numberOfShares > 2) {
          numberOfShares = 2;
        }

        let baseAmount = numberOfShares === 1 ? 510 : 1020;
        const lateFee =
          currentDay > 10 ? (currentDay - 10) * 10 * numberOfShares : 0;

        paymentAmountField.value = baseAmount + lateFee;
      }

      document
        .getElementById("numberOfShares")
        .addEventListener("input", calculatePaymentAmount);

      // Submit form to Google Sheets
      const scriptURL =
        "https://script.google.com/macros/s/AKfycbyiD-hhr9-QYwNBMHa6wIAb5YpJoqrCPrmb2XpT7r-mFiql-bHrfcQFKFEwxi8P948v/exec";
      const form = document.forms["submit-to-google-sheet"];
      const statusMessage = document.getElementById("statusMessage");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const submitButton = form.querySelector("button");
        submitButton.disabled = true;
        submitButton.textContent = "Submitting...";

        fetch(scriptURL, { method: "POST", body: new FormData(form) })
          .then((response) => {
            statusMessage.textContent = "Payment Submitted Successfully!";
            statusMessage.className = "text-green-600 mt-4";
            form.reset();
            submitButton.disabled = false;
            submitButton.textContent = "Submit Payment";
          })
          .catch((error) => {
            statusMessage.textContent = "Error! Please try again later.";
            statusMessage.className = "text-red-600 mt-4";
            submitButton.disabled = false;
            submitButton.textContent = "Submit Payment";
          });
      });

      // Embed Google Sheet
      document.getElementById("googleSheet").src =
        "https://docs.google.com/spreadsheets/d/14N6pJIRhZLS09DDChSjTAdFnMVd9ZZd2h-rIFTbTtH0/edit?gid=0#gid=0";
    </script>
  </body>
</html>
